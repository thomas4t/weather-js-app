module "vpc" {
  version = "3.7.0"  # bug in new version in flowlog
  source = "terraform-aws-modules/vpc/aws"
  create_vpc = local.cfg["create_vpc"]
  name = local.cfg["name"]
  cidr = local.cfg["cidr"]
  enable_ipv6 = local.cfg["enable_ipv6"]
  private_subnet_ipv6_prefixes = local.cfg["private_subnet_ipv6_prefixes"]
  public_subnet_ipv6_prefixes = local.cfg["public_subnet_ipv6_prefixes"]
  outpost_subnet_ipv6_prefixes = local.cfg["outpost_subnet_ipv6_prefixes"]
  database_subnet_ipv6_prefixes = local.cfg["database_subnet_ipv6_prefixes"]
  redshift_subnet_ipv6_prefixes = local.cfg["redshift_subnet_ipv6_prefixes"]
  elasticache_subnet_ipv6_prefixes = local.cfg["elasticache_subnet_ipv6_prefixes"]
  intra_subnet_ipv6_prefixes = local.cfg["intra_subnet_ipv6_prefixes"]
  assign_ipv6_address_on_creation = local.cfg["assign_ipv6_address_on_creation"]
  private_subnet_assign_ipv6_address_on_creation = local.cfg["private_subnet_assign_ipv6_address_on_creation"]
  public_subnet_assign_ipv6_address_on_creation = local.cfg["public_subnet_assign_ipv6_address_on_creation"]
  outpost_subnet_assign_ipv6_address_on_creation = local.cfg["outpost_subnet_assign_ipv6_address_on_creation"]
  database_subnet_assign_ipv6_address_on_creation = local.cfg["database_subnet_assign_ipv6_address_on_creation"]
  redshift_subnet_assign_ipv6_address_on_creation = local.cfg["redshift_subnet_assign_ipv6_address_on_creation"]
  elasticache_subnet_assign_ipv6_address_on_creation = local.cfg["elasticache_subnet_assign_ipv6_address_on_creation"]
  intra_subnet_assign_ipv6_address_on_creation = local.cfg["intra_subnet_assign_ipv6_address_on_creation"]
  secondary_cidr_blocks = local.cfg["secondary_cidr_blocks"]
  instance_tenancy = local.cfg["instance_tenancy"]
  public_subnet_suffix = local.cfg["public_subnet_suffix"]
  private_subnet_suffix = local.cfg["private_subnet_suffix"]
  outpost_subnet_suffix = local.cfg["outpost_subnet_suffix"]
  intra_subnet_suffix = local.cfg["intra_subnet_suffix"]
  database_subnet_suffix = local.cfg["database_subnet_suffix"]
  redshift_subnet_suffix = local.cfg["redshift_subnet_suffix"]
  elasticache_subnet_suffix = local.cfg["elasticache_subnet_suffix"]
  public_subnets = local.cfg["public_subnets"]
  private_subnets = local.cfg["private_subnets"]
  outpost_subnets = local.cfg["outpost_subnets"]
  database_subnets = local.cfg["database_subnets"]
  redshift_subnets = local.cfg["redshift_subnets"]
  elasticache_subnets = local.cfg["elasticache_subnets"]
  intra_subnets = local.cfg["intra_subnets"]
  create_database_subnet_route_table = local.cfg["create_database_subnet_route_table"]
  create_redshift_subnet_route_table = local.cfg["create_redshift_subnet_route_table"]
  enable_public_redshift = local.cfg["enable_public_redshift"]
  create_elasticache_subnet_route_table = local.cfg["create_elasticache_subnet_route_table"]
  create_database_subnet_group = local.cfg["create_database_subnet_group"]
  create_elasticache_subnet_group = local.cfg["create_elasticache_subnet_group"]
  create_redshift_subnet_group = local.cfg["create_redshift_subnet_group"]
  create_database_internet_gateway_route = local.cfg["create_database_internet_gateway_route"]
  create_database_nat_gateway_route = local.cfg["create_database_nat_gateway_route"]
  azs = local.cfg["azs"]
  enable_dns_hostnames = local.cfg["enable_dns_hostnames"]
  enable_dns_support = local.cfg["enable_dns_support"]
  enable_classiclink = local.cfg["enable_classiclink"]
  enable_classiclink_dns_support = local.cfg["enable_classiclink_dns_support"]
  enable_nat_gateway = local.cfg["enable_nat_gateway"]
  single_nat_gateway = local.cfg["single_nat_gateway"]
  one_nat_gateway_per_az = local.cfg["one_nat_gateway_per_az"]
  reuse_nat_ips = local.cfg["reuse_nat_ips"]
  external_nat_ip_ids = local.cfg["external_nat_ip_ids"]
  external_nat_ips = local.cfg["external_nat_ips"]
  map_public_ip_on_launch = local.cfg["map_public_ip_on_launch"]
  customer_gateways = local.cfg["customer_gateways"]
  enable_vpn_gateway = local.cfg["enable_vpn_gateway"]
  vpn_gateway_id = local.cfg["vpn_gateway_id"]
  amazon_side_asn = local.cfg["amazon_side_asn"]
  vpn_gateway_az = local.cfg["vpn_gateway_az"]
  propagate_intra_route_tables_vgw = local.cfg["propagate_intra_route_tables_vgw"]
  propagate_private_route_tables_vgw = local.cfg["propagate_private_route_tables_vgw"]
  propagate_public_route_tables_vgw = local.cfg["propagate_public_route_tables_vgw"]
  manage_default_route_table = local.cfg["manage_default_route_table"]
  default_route_table_propagating_vgws = local.cfg["default_route_table_propagating_vgws"]
  default_route_table_routes = local.cfg["default_route_table_routes"]
  default_route_table_tags = local.cfg["default_route_table_tags"]
  tags = local.cfg["tags"]
  vpc_tags = local.cfg["vpc_tags"]
  igw_tags = local.cfg["igw_tags"]
  public_subnet_tags = local.cfg["public_subnet_tags"]
  private_subnet_tags = local.cfg["private_subnet_tags"]
  outpost_subnet_tags = local.cfg["outpost_subnet_tags"]
  public_route_table_tags = local.cfg["public_route_table_tags"]
  private_route_table_tags = local.cfg["private_route_table_tags"]
  database_route_table_tags = local.cfg["database_route_table_tags"]
  redshift_route_table_tags = local.cfg["redshift_route_table_tags"]
  elasticache_route_table_tags = local.cfg["elasticache_route_table_tags"]
  intra_route_table_tags = local.cfg["intra_route_table_tags"]
  database_subnet_tags = local.cfg["database_subnet_tags"]
  database_subnet_group_tags = local.cfg["database_subnet_group_tags"]
  redshift_subnet_tags = local.cfg["redshift_subnet_tags"]
  redshift_subnet_group_tags = local.cfg["redshift_subnet_group_tags"]
  elasticache_subnet_tags = local.cfg["elasticache_subnet_tags"]
  intra_subnet_tags = local.cfg["intra_subnet_tags"]
  public_acl_tags = local.cfg["public_acl_tags"]
  private_acl_tags = local.cfg["private_acl_tags"]
  outpost_acl_tags = local.cfg["outpost_acl_tags"]
  intra_acl_tags = local.cfg["intra_acl_tags"]
  database_acl_tags = local.cfg["database_acl_tags"]
  redshift_acl_tags = local.cfg["redshift_acl_tags"]
  elasticache_acl_tags = local.cfg["elasticache_acl_tags"]
  dhcp_options_tags = local.cfg["dhcp_options_tags"]
  nat_gateway_tags = local.cfg["nat_gateway_tags"]
  nat_eip_tags = local.cfg["nat_eip_tags"]
  customer_gateway_tags = local.cfg["customer_gateway_tags"]
  vpn_gateway_tags = local.cfg["vpn_gateway_tags"]
  vpc_flow_log_tags = local.cfg["vpc_flow_log_tags"]
  vpc_flow_log_permissions_boundary = local.cfg["vpc_flow_log_permissions_boundary"]
  enable_dhcp_options = local.cfg["enable_dhcp_options"]
  dhcp_options_domain_name = local.cfg["dhcp_options_domain_name"]
  dhcp_options_domain_name_servers = local.cfg["dhcp_options_domain_name_servers"]
  dhcp_options_ntp_servers = local.cfg["dhcp_options_ntp_servers"]
  dhcp_options_netbios_name_servers = local.cfg["dhcp_options_netbios_name_servers"]
  dhcp_options_netbios_node_type = local.cfg["dhcp_options_netbios_node_type"]
  manage_default_vpc = local.cfg["manage_default_vpc"]
  default_vpc_name = local.cfg["default_vpc_name"]
  default_vpc_enable_dns_support = local.cfg["default_vpc_enable_dns_support"]
  default_vpc_enable_dns_hostnames = local.cfg["default_vpc_enable_dns_hostnames"]
  default_vpc_enable_classiclink = local.cfg["default_vpc_enable_classiclink"]
  default_vpc_tags = local.cfg["default_vpc_tags"]
  manage_default_network_acl = local.cfg["manage_default_network_acl"]
  default_network_acl_name = local.cfg["default_network_acl_name"]
  default_network_acl_tags = local.cfg["default_network_acl_tags"]
  public_dedicated_network_acl = local.cfg["public_dedicated_network_acl"]
  private_dedicated_network_acl = local.cfg["private_dedicated_network_acl"]
  outpost_dedicated_network_acl = local.cfg["outpost_dedicated_network_acl"]
  intra_dedicated_network_acl = local.cfg["intra_dedicated_network_acl"]
  database_dedicated_network_acl = local.cfg["database_dedicated_network_acl"]
  redshift_dedicated_network_acl = local.cfg["redshift_dedicated_network_acl"]
  elasticache_dedicated_network_acl = local.cfg["elasticache_dedicated_network_acl"]
  default_network_acl_ingress = local.cfg["default_network_acl_ingress"]
  default_network_acl_egress = local.cfg["default_network_acl_egress"]
  public_inbound_acl_rules = local.cfg["public_inbound_acl_rules"]
  public_outbound_acl_rules = local.cfg["public_outbound_acl_rules"]
  private_inbound_acl_rules = local.cfg["private_inbound_acl_rules"]
  private_outbound_acl_rules = local.cfg["private_outbound_acl_rules"]
  outpost_inbound_acl_rules = local.cfg["outpost_inbound_acl_rules"]
  outpost_outbound_acl_rules = local.cfg["outpost_outbound_acl_rules"]
  intra_inbound_acl_rules = local.cfg["intra_inbound_acl_rules"]
  intra_outbound_acl_rules = local.cfg["intra_outbound_acl_rules"]
  database_inbound_acl_rules = local.cfg["database_inbound_acl_rules"]
  database_outbound_acl_rules = local.cfg["database_outbound_acl_rules"]
  redshift_inbound_acl_rules = local.cfg["redshift_inbound_acl_rules"]
  redshift_outbound_acl_rules = local.cfg["redshift_outbound_acl_rules"]
  elasticache_inbound_acl_rules = local.cfg["elasticache_inbound_acl_rules"]
  elasticache_outbound_acl_rules = local.cfg["elasticache_outbound_acl_rules"]
  manage_default_security_group = local.cfg["manage_default_security_group"]
  default_security_group_name = local.cfg["default_security_group_name"]
  default_security_group_ingress = local.cfg["default_security_group_ingress"]
  enable_flow_log = local.cfg["enable_flow_log"]
  default_security_group_egress = local.cfg["default_security_group_egress"]
  default_security_group_tags = local.cfg["default_security_group_tags"]
  create_flow_log_cloudwatch_log_group = local.cfg["create_flow_log_cloudwatch_log_group"]
  create_flow_log_cloudwatch_iam_role = local.cfg["create_flow_log_cloudwatch_iam_role"]
  flow_log_traffic_type = local.cfg["flow_log_traffic_type"]
  flow_log_destination_type = local.cfg["flow_log_destination_type"]
  flow_log_log_format = local.cfg["flow_log_log_format"]
  flow_log_destination_arn = local.cfg["flow_log_destination_arn"]
  flow_log_cloudwatch_iam_role_arn = local.cfg["flow_log_cloudwatch_iam_role_arn"]
  flow_log_cloudwatch_log_group_name_prefix = local.cfg["flow_log_cloudwatch_log_group_name_prefix"]
  flow_log_cloudwatch_log_group_retention_in_days = local.cfg["flow_log_cloudwatch_log_group_retention_in_days"]
  flow_log_cloudwatch_log_group_kms_key_id = local.cfg["flow_log_cloudwatch_log_group_kms_key_id"]
  flow_log_max_aggregation_interval = local.cfg["flow_log_max_aggregation_interval"]
  create_igw = local.cfg["create_igw"]
  create_egress_only_igw = local.cfg["create_egress_only_igw"]
  outpost_arn = local.cfg["outpost_arn"]
  outpost_az = local.cfg["outpost_az"]
}